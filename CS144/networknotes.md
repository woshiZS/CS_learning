### 网络八股文笔记

> 事先声明一下，记到哪算哪，而且一般都是记录一些不是很常见的知识点

* udp不可靠的表现在只有接受端有缓冲区，接收端缓冲区满了之后，就会丢弃新来的udp报文，并向对方发送ICMP报文表示端口不可达。
* 在udp进行传输的时候，如果不主动调用connect函数，内核每次发送udp包的时候都会建立临时连接，这个连接相较于长连接来说是效率比较低下的。
* tcp超时重传的原理，就是发送方，发送一次数据就开始计时，一定时间内如果没有得到发送数据的ack，那么就重新发送数据，次数过多就发送一个reset数据用于断开连接。
* tcp停止等待协议：就是发送方在已发送的报文得到确认前，发送的滑动窗口不会移动。
* tcp最大连接数限制：其实只要清楚一个连接由于客户端ip+端口和服务端的ip+端口确定就好了。
* tcp流量控制和拥塞控制：**流量控制，接收方会将自己的接受窗口大小返回给发送方，例如发送发知道接受方窗口大小为0的时候就停止发送。这里有待补充，书上是有讲到具体的算法的**
* tcp拥塞避免算法：
  * 慢开始：在达到ssthresh之前，拥塞窗口从1开始指数增长
  * 拥塞避免：每经过一个RTT的时间将拥塞窗口加1，发生拥塞后将ssthresh减半，并将拥塞窗口设置为1，然后重复上述两种做法
  * 快重传：接收方每收到一个失序报文就立即发送重复确认（自己按序收到的最后一个报文）
  * 快恢复：接受到三次快重传之后，将ssthresh减半，并将窗口也修改为相同的值，之后使用拥塞避免算法。

* tcp粘包拆包：粘包就是单词发送的数据过小，tcp使用nagle，只有当收到一个确认后才会发送给对端，所以可能会将多个小数据组合在一起进行传送。而数据较大的时候炒超过缓冲区大小或者超过最大报文长度的时候，就会对报文进行拆解。
* 报文结构稍微了解一下就好了
* SYN FLOOD： ddos攻击，了解一下就好了。
* 如何防范ddos攻击：
  * 普通方法：提高端口容量，减少半开连接的等待时间；辨别恶意IP进行过滤
  * 特殊方法：**syn cache**，建立一个HashTable，发生筒冲突时丢弃之前的连接；**syn cookies**, 额外发送给连接发起方一个序列号或者时间戳，返回的时候客户端需要发送和这个序列号相关的验证信息，验证成功后才开始建立连接。**syn proxy**: 在客户端和让服务器之间加一层代理服务器。
* 如何处理服务端大量close wait和time wait，稍微回忆一下概念就好了，close wait是被动方发送剩余数据的时间，time wait是主动发起方的等待时间。